# ğŸ“ˆ è‚¡ç¥¨æ™ºèƒ½ç­›é€‰ç³»ç»Ÿ

> åŸºäºæŠ€æœ¯åˆ†æ + æœºå™¨å­¦ä¹ çš„Aè‚¡é€‰è‚¡ç³»ç»Ÿ

## ğŸ¯ ç³»ç»Ÿç‰¹ç‚¹

**ä¸¤é˜¶æ®µç­›é€‰ç­–ç•¥ï¼š**
```
5000åªAè‚¡ â†’ [è§„åˆ™ç­›é€‰] â†’ 200åªå€™é€‰è‚¡ â†’ [MLç²¾ç­›] â†’ 50åªç²¾é€‰è‚¡
```

**æ ¸å¿ƒåŠŸèƒ½ï¼š**
- ğŸ“Š å¤šå‘¨æœŸæŠ€æœ¯åˆ†æï¼ˆæœˆçº¿/å‘¨çº¿/æ—¥çº¿ï¼‰
- ğŸ¤– æœºå™¨å­¦ä¹ æ™ºèƒ½æ’åºï¼ˆProphet + LightGBMï¼‰
- ğŸ¯ ä¹°å…¥ä¿¡å·è‡ªåŠ¨æ£€æµ‹ï¼ˆçªç ´/å›è¸©ï¼‰
- âš™ï¸ é«˜åº¦å¯é…ç½®çš„ç­–ç•¥å‚æ•°

---

## ğŸ“¦ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

### 2. è·å–Kçº¿æ•°æ®ï¼ˆé¦–æ¬¡è¿è¡Œï¼‰

```bash
python stock_all/fetch_kline_history.py --output-dir ./kline_data --delay 0.05
```

â° é¦–æ¬¡è·å–çº¦éœ€3-6å°æ—¶ï¼Œæ”¯æŒæ–­ç‚¹ç»­ä¼ ã€‚

### 3. è¿è¡Œå®Œæ•´ç­›é€‰

```bash
# å‘¨çº¿ç­›é€‰ + MLæ’åº
python stock_all/run_full_scan.py --config stock_all/config.yaml
```

è¾“å‡ºç»“æœï¼š
- `output/watchlist.csv` - 200åªå€™é€‰è‚¡
- `output/ranked_stocks.csv` - 50åªç²¾é€‰è‚¡

### 4. æ—¥çº¿ä¿¡å·æ‰«æ

```bash
python stock_all/daily_scan.py --config stock_all/config.yaml --watchlist output/watchlist.csv
```

è¾“å‡ºç»“æœï¼š
- `output/daily_signals.csv` - ä»Šæ—¥ä¹°å…¥ä¿¡å·

---

## ğŸš€ éƒ¨ç½²åˆ°äº‘ç«¯

### æ–¹å¼ä¸€ï¼šRender Web Serviceï¼ˆæ¨èæ–°æ‰‹ï¼‰

**ç‰¹ç‚¹ï¼š** å…è´¹ã€æœ‰Webç•Œé¢ã€æ‰‹åŠ¨è§¦å‘

```bash
# 1. æ¨é€åˆ°GitHub
git init
git add .
git commit -m "Deploy to Render"
git push

# 2. åœ¨Renderåˆ›å»ºWeb Service
# - è¿æ¥GitHubä»“åº“
# - Build Command: pip install -r requirements.txt
# - Start Command: python app.py

# 3. è®¿é—®Webç•Œé¢ï¼Œç‚¹å‡»æŒ‰é’®è¿è¡Œä»»åŠ¡
```

### æ–¹å¼äºŒï¼šBackground Workerï¼ˆè‡ªåŠ¨åŒ–ï¼‰

**ç‰¹ç‚¹ï¼š** å…è´¹ã€è‡ªåŠ¨å®šæ—¶æ‰§è¡Œ

```bash
# åœ¨Renderåˆ›å»ºBackground Worker
# - Start Command: python scheduler.py
# - è‡ªåŠ¨æŒ‰æ—¶é—´è¡¨è¿è¡Œä»»åŠ¡
```

### æ–¹å¼ä¸‰ï¼šCron Jobsï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰

**ç‰¹ç‚¹ï¼š** æŒ‰éœ€æ‰§è¡Œã€ç¨³å®šï¼ˆéœ€ä»˜è´¹ $7/æœˆï¼‰

ä½¿ç”¨é¡¹ç›®ä¸­çš„ `render.yaml` é…ç½®æ–‡ä»¶ï¼ŒRenderä¼šè‡ªåŠ¨éƒ¨ç½²ã€‚

### ğŸ“– è¯¦ç»†éƒ¨ç½²æŒ‡å—

æŸ¥çœ‹å®Œæ•´æ•™ç¨‹ï¼š
- **å¿«é€Ÿå¼€å§‹ï¼š** [RENDER_QUICKSTART.md](RENDER_QUICKSTART.md)
- **è¯¦ç»†æ–‡æ¡£ï¼š** [README_DEPLOY.md](README_DEPLOY.md)

---

## ğŸ“Š ç­–ç•¥è¯´æ˜

### å¤šå‘¨æœŸå…±æŒ¯é€‰è‚¡

**æœˆçº¿å¤§åŠ¿åˆ¤å®šï¼š**
- âœ… ä¸Šå‡è¶‹åŠ¿ï¼šMA10å‘ä¸Šï¼Œå¤šå¤´æ’åˆ—
- âœ… åº•éƒ¨ç­‘åº•ï¼šæ¨ªç›˜6-24ä¸ªæœˆï¼Œç¼©é‡æ•´ç†

**å‘¨çº¿ç»“æ„éªŒè¯ï¼š**
- âœ… å‡çº¿å¤šå¤´ï¼šæ”¶ç›˜ä»·>MA40ï¼ŒMA40å‘ä¸Š
- âœ… åŠ¨èƒ½ç¡®è®¤ï¼šMACDæŸ±çŠ¶>0æˆ–è¿‘æœŸé‡‘å‰
- âœ… é‡èƒ½é…åˆï¼šä¸Šæ¶¨å‘¨é‡èƒ½>ä¸‹è·Œå‘¨é‡èƒ½

**æ—¥çº¿ä¹°ç‚¹æ•æ‰ï¼š**
- ğŸ¯ çªç ´å‹ï¼šæ”¾é‡çªç ´ï¼ŒRSI>60ï¼Œåˆ›æ–°é«˜
- ğŸ¯ å›è¸©å‹ï¼šç¼©é‡å›è¸©å‡çº¿ï¼Œæ”¾é‡åå¼¹

### MLæ™ºèƒ½æ’åº

**30ä¸ªæ ¸å¿ƒç‰¹å¾ï¼š**
- è¶‹åŠ¿ç‰¹å¾ï¼šMAæ–œç‡ã€å‡çº¿æ’åˆ—
- åŠ¨èƒ½ç‰¹å¾ï¼šMACDã€RSIã€KDJ
- é‡èƒ½ç‰¹å¾ï¼šæˆäº¤é‡æ¯”ã€é‡ä»·é…åˆ
- å½¢æ€ç‰¹å¾ï¼šæ³¢åŠ¨ç‡ã€å›æ’¤æ·±åº¦

**Prophetæ—¶é—´åºåˆ—é¢„æµ‹ï¼š**
- é¢„æµ‹æœªæ¥3ä¸ªæœˆèµ°åŠ¿
- è¶‹åŠ¿å¼ºåº¦è¯„åˆ†
- ç½®ä¿¡åŒºé—´è®¡ç®—

---

## âš™ï¸ é…ç½®æ–‡ä»¶

æ‰€æœ‰ç­–ç•¥å‚æ•°åœ¨ `stock_all/config.yaml` ä¸­é…ç½®ï¼š

```yaml
# åŸºç¡€è¿‡æ»¤
pre_filter:
  exclude_st: true
  min_market_cap: 12000000000  # 120äº¿å¸‚å€¼
  min_avg_amount_20d: 100000000  # 1äº¿æ—¥å‡æˆäº¤é¢

# æœˆçº¿åˆ¤å®š
monthly:
  uptrend:
    ma10_slope_min: 0.002  # MA10æ–œç‡>0.2%
  base_building:
    consolidation_months_min: 6  # è‡³å°‘ç­‘åº•6ä¸ªæœˆ

# å‘¨çº¿éªŒè¯
weekly:
  mandatory:
    close_above_ma40: true
    ma40_slope_min: 0.0
    volume_ratio_min: 1.2

# MLæ’åº
ml_ranking:
  enabled: true
  prophet:
    forecast_periods: 3  # é¢„æµ‹3ä¸ªæœˆ
  output:
    top_n: 50  # è¾“å‡ºå‰50åª
```

æ ¹æ®å›æµ‹ç»“æœè°ƒæ•´å‚æ•°ä»¥ä¼˜åŒ–ç­–ç•¥ã€‚

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
stock_Ays/
â”œâ”€â”€ stock_all/                  # æ ¸å¿ƒä»£ç 
â”‚   â”œâ”€â”€ config.yaml            # ç­–ç•¥é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ fetch_kline_history.py # æ•°æ®è·å–
â”‚   â”œâ”€â”€ weekly_scan.py         # å‘¨çº¿ç­›é€‰
â”‚   â”œâ”€â”€ daily_scan.py          # æ—¥çº¿æ‰«æ
â”‚   â”œâ”€â”€ run_full_scan.py       # å®Œæ•´æµç¨‹
â”‚   â”œâ”€â”€ ml_ranker.py           # MLæ’åº
â”‚   â”œâ”€â”€ prophet_predictor.py   # Propheté¢„æµ‹
â”‚   â”œâ”€â”€ indicators.py          # æŠ€æœ¯æŒ‡æ ‡
â”‚   â””â”€â”€ simple_feature_engineering.py  # ç‰¹å¾å·¥ç¨‹
â”œâ”€â”€ kline_data/                # Kçº¿æ•°æ®ç›®å½•
â”œâ”€â”€ output/                    # è¾“å‡ºç»“æœ
â”œâ”€â”€ requirements.txt           # Pythonä¾èµ–
â”œâ”€â”€ render.yaml               # Renderéƒ¨ç½²é…ç½®
â”œâ”€â”€ Dockerfile                # Dockeré…ç½®
â”œâ”€â”€ app.py                    # Webåº”ç”¨
â”œâ”€â”€ scheduler.py              # å®šæ—¶è°ƒåº¦å™¨
â””â”€â”€ README.md                 # æœ¬æ–‡ä»¶
```

---

## ğŸ”§ æ ¸å¿ƒæ¨¡å—

| æ¨¡å— | åŠŸèƒ½ | è¾“å…¥ | è¾“å‡º |
|------|------|------|------|
| `fetch_kline_history.py` | è·å–Kçº¿æ•°æ® | - | CSVæ–‡ä»¶ |
| `weekly_scan.py` | å‘¨çº¿ç­›é€‰ | Kçº¿æ•°æ® | watchlist.csv |
| `ml_ranker.py` | MLæ’åº | å€™é€‰è‚¡ | ranked_stocks.csv |
| `run_full_scan.py` | å®Œæ•´æµç¨‹ | Kçº¿æ•°æ® | ç²¾é€‰è‚¡ |
| `daily_scan.py` | æ—¥çº¿ä¿¡å· | è§‚å¯Ÿæ±  | daily_signals.csv |

---

## ğŸ“ˆ ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹1ï¼šå‘¨æœ«ç­›é€‰ä¸€æ¬¡

```bash
# æ¯å‘¨äº”æ”¶ç›˜åè¿è¡Œ
python stock_all/run_full_scan.py --config stock_all/config.yaml

# æŸ¥çœ‹ç»“æœ
cat output/ranked_stocks.csv
```

### ç¤ºä¾‹2ï¼šæ¯æ—¥ä¿¡å·æ‰«æ

```bash
# æ¯ä¸ªäº¤æ˜“æ—¥æ”¶ç›˜åè¿è¡Œ
python stock_all/daily_scan.py \
  --config stock_all/config.yaml \
  --watchlist output/watchlist.csv

# æŸ¥çœ‹ä»Šæ—¥ä¿¡å·
cat output/daily_signals.csv
```

### ç¤ºä¾‹3ï¼šè‡ªå®šä¹‰é…ç½®

```bash
# ä¿®æ”¹é…ç½®æ–‡ä»¶
vi stock_all/config.yaml

# ä½¿ç”¨æ–°é…ç½®è¿è¡Œ
python stock_all/run_full_scan.py --config stock_all/config.yaml
```

---

## ğŸ“ è¿›é˜¶ä½¿ç”¨

### 1. å›æµ‹ä¼˜åŒ–

```python
# ä¿®æ”¹config.yamlä¸­çš„å‚æ•°
# è¿è¡Œç­›é€‰ï¼Œè§‚å¯Ÿç»“æœ
# è®°å½•å†å²è¡¨ç°ï¼Œä¼˜åŒ–å‚æ•°
```

### 2. æ·»åŠ è‡ªå®šä¹‰æŒ‡æ ‡

åœ¨ `indicators.py` ä¸­æ·»åŠ æ–°æŒ‡æ ‡ï¼š

```python
def calculate_custom_indicator(df):
    # ä½ çš„æŒ‡æ ‡è®¡ç®—é€»è¾‘
    return df
```

### 3. æ‰©å±•MLæ¨¡å‹

åœ¨ `ml_ranker.py` ä¸­æ·»åŠ æ–°æ¨¡å‹ï¼š

```python
# ä½¿ç”¨XGBoostã€ç¥ç»ç½‘ç»œç­‰
# ç»“åˆå¤šä¸ªæ¨¡å‹çš„é¢„æµ‹ç»“æœ
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **æ•°æ®æ¥æºï¼š** ä½¿ç”¨baostockï¼Œå…è´¹ä½†æœ‰é™åˆ¶
   - å»ºè®®è®¾ç½®åˆç†çš„å»¶è¿Ÿï¼ˆ0.05ç§’ï¼‰
   - é¿å…é¢‘ç¹è¯·æ±‚è¢«å°IP
   - å¯è€ƒè™‘ä½¿ç”¨å…¶ä»–æ•°æ®æºï¼ˆtushareã€akshareç­‰ï¼‰

2. **å‚æ•°è°ƒä¼˜ï¼š** æ ¹æ®å¸‚åœºç¯å¢ƒè°ƒæ•´
   - ç‰›å¸‚å¯æé«˜ç­›é€‰é—¨æ§›
   - ç†Šå¸‚å¯æ”¾å®½ç­‘åº•æ¡ä»¶
   - éœ‡è¡å¸‚æ³¨é‡é‡èƒ½é…åˆ

3. **é£é™©æ§åˆ¶ï¼š** 
   - ä¸¥æ ¼æ‰§è¡Œæ­¢æŸï¼ˆå»ºè®®8%ï¼‰
   - å•ç¬”ä»“ä½ä¸è¶…è¿‡3%
   - åˆ†æ•£æŠ•èµ„ï¼Œæ§åˆ¶æ€»ä»“ä½

4. **å›æµ‹éªŒè¯ï¼š**
   - æ–°ç­–ç•¥éœ€è¦å›æµ‹éªŒè¯
   - è§‚å¯Ÿè‡³å°‘3-6ä¸ªæœˆå®ç›˜è¡¨ç°
   - æ ¹æ®ç»“æœä¸æ–­ä¼˜åŒ–

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **Python 3.11+**
- **æ•°æ®åˆ†æï¼š** pandas, numpy, scipy
- **æœºå™¨å­¦ä¹ ï¼š** Prophet, LightGBM
- **æ•°æ®è·å–ï¼š** baostock
- **Webæ¡†æ¶ï¼š** Flaskï¼ˆå¯é€‰ï¼‰
- **éƒ¨ç½²å¹³å°ï¼š** Render, Docker

---

## ğŸ“Š ç¤ºä¾‹è¾“å‡º

### ranked_stocks.csv

| ä»£ç  | åç§° | MLè¯„åˆ† | Propheté¢„æµ‹æ”¶ç›Š% | å½“å‰ä»· | å…³é”®ç‰¹å¾ |
|------|------|--------|----------------|--------|----------|
| 600036 | æ‹›å•†é“¶è¡Œ | 85.3 | 12.5 | 38.50 | å‡çº¿å¤šå¤´+MACDé‡‘å‰ |
| 000858 | äº”ç²®æ¶² | 82.7 | 10.8 | 168.20 | åº•éƒ¨ç­‘åº•+æ”¾é‡çªç ´ |
| 600519 | è´µå·èŒ…å° | 80.5 | 9.3 | 1650.00 | è¶‹åŠ¿å‘ä¸Š+é‡èƒ½é…åˆ |

### daily_signals.csv

| ä»£ç  | åç§° | ç±»å‹ | å…¥åœºä»· | æ­¢æŸä»· | é£é™©% | é‡æ¯” | å¼ºåº¦ |
|------|------|------|--------|--------|-------|------|------|
| 600036 | æ‹›å•†é“¶è¡Œ | BREAKOUT | 38.50 | 35.42 | 8.0 | 1.8 | 2 |
| 000858 | äº”ç²®æ¶² | PULLBACK | 168.20 | 155.14 | 7.8 | 1.3 | 2 |

---

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼

---

## ğŸ“„ å…è´£å£°æ˜

**âš ï¸ é‡è¦æé†’ï¼š**

æœ¬ç³»ç»Ÿä»…ä¾›å­¦ä¹ ç ”ç©¶ä½¿ç”¨ï¼Œä¸æ„æˆä»»ä½•æŠ•èµ„å»ºè®®ã€‚

- å†å²ä¸šç»©ä¸ä»£è¡¨æœªæ¥è¡¨ç°
- æŠ€æœ¯åˆ†æå­˜åœ¨å±€é™æ€§
- å¸‚åœºå­˜åœ¨ä¸å¯é¢„æµ‹çš„é£é™©
- è¯·ç‹¬ç«‹æ€è€ƒï¼Œç†æ€§æŠ•èµ„

**è‚¡å¸‚æœ‰é£é™©ï¼ŒæŠ•èµ„éœ€è°¨æ…ï¼**

---

## ğŸ“ è”ç³»æ–¹å¼

- GitHub Issues: [æäº¤é—®é¢˜](https://github.com/ä½ çš„ç”¨æˆ·å/stock_Ays/issues)
- é‚®ç®±: your.email@example.com

---

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.0.0 (2024-11-11)
- âœ… åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- âœ… æ”¯æŒå‘¨çº¿ç­›é€‰å’Œæ—¥çº¿æ‰«æ
- âœ… é›†æˆMLæ’åºåŠŸèƒ½
- âœ… æ·»åŠ Renderéƒ¨ç½²æ”¯æŒ
- âœ… Webç•Œé¢å’ŒAPIæ¥å£

---

**Made with â¤ï¸ for Smart Investing**

